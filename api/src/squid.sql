-- MySQL Script generated by MySQL Workbench
-- Mon Jul  5 18:35:19 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema squid
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema squid
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `squid` DEFAULT CHARACTER SET = utf8mb4 DEFAULT COLLATE = utf8mb4_unicode_ci;
USE `squid` ;

-- -----------------------------------------------------
-- Table `squid`.`Logins`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `squid`.`Logins` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `passwordHash` VARCHAR(255) NOT NULL,
  `isAdmin` TINYINT NULL,
  `isEnabled` TINYINT NULL,
  PRIMARY KEY (`id`));


-- -----------------------------------------------------
-- Table `squid`.`Images`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `squid`.`Images` (
  `id` INT NOT NULL,
  `profilePicturePath` VARCHAR(256) NULL,
  `description` VARCHAR(256) NULL,
  `updatedAt` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `squid`.`Users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `squid`.`Users` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `userName` VARCHAR(200) NOT NULL,
  `loginsId` INT NOT NULL,
  `imagesId` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Users_Logins_idx` (`loginsId` ASC),
  INDEX `fk_Users_Images1_idx` (`imagesId` ASC),
  CONSTRAINT `fk_Users_Logins`
    FOREIGN KEY (`loginsId`)
    REFERENCES `squid`.`Logins` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Users_Images1`
    FOREIGN KEY (`imagesId`)
    REFERENCES `squid`.`Images` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `squid`.`Forums`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `squid`.`Forums` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(255) NULL,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `shortDescription` VARCHAR(1000) NULL,
  PRIMARY KEY (`id`));


-- -----------------------------------------------------
-- Table `squid`.`Threads`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `squid`.`Threads` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `title` VARCHAR(255) NULL,
  `Content` VARCHAR(10000) NOT NULL,
  `usersId` INT NOT NULL,
  `forumsId` INT NOT NULL,
  PRIMARY KEY (`id`, `usersId`, `forumsId`),
  INDEX `fk_Threads_Users1_idx` (`usersId` ASC),
  INDEX `fk_Threads_Foren1_idx` (`forumsId` ASC),
  CONSTRAINT `fk_Threads_Users1`
    FOREIGN KEY (`usersId`)
    REFERENCES `squid`.`Users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Threads_Foren1`
    FOREIGN KEY (`forumsId`)
    REFERENCES `squid`.`Forums` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `squid`.`Contributions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `squid`.`Contributions` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `content` VARCHAR(10000) NULL,
  `threadsId` INT NOT NULL,
  `usersId` INT NOT NULL,
  PRIMARY KEY (`id`, `threadsId`, `usersId`),
  INDEX `fk_Contributions_Threads1_idx` (`threadsId` ASC),
  INDEX `fk_Contributions_Users1_idx` (`usersId` ASC),
  CONSTRAINT `fk_Contributions_Threads1`
    FOREIGN KEY (`threadsId`)
    REFERENCES `squid`.`Threads` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Contributions_Users1`
    FOREIGN KEY (`usersId`)
    REFERENCES `squid`.`Users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `squid`.`SubscribedThreads`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `squid`.`SubscribedThreads` (
  `threadsId` INT NOT NULL,
  `usersId` INT NOT NULL,
  `timeStamp` TIMESTAMP NULL,
  `updatedAt` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`threadsId`, `usersId`),
  INDEX `fk_Threads_has_Users_Users1_idx` (`usersId` ASC),
  INDEX `fk_Threads_has_Users_Threads1_idx` (`threadsId` ASC),
  CONSTRAINT `fk_Threads_has_Users_Threads1`
    FOREIGN KEY (`threadsId`)
    REFERENCES `squid`.`Threads` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Threads_has_Users_Users1`
    FOREIGN KEY (`usersId`)
    REFERENCES `squid`.`Users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `squid`.`SubscribedForums`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `squid`.`SubscribedForums` (
  `usersId` INT NOT NULL,
  `forumsId` INT NOT NULL,
  `timeStamp` TIMESTAMP NULL,
  `updatedAt` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`usersId`, `forumsId`),
  INDEX `fk_Users_has_Foren_Foren1_idx` (`forumsId` ASC),
  INDEX `fk_Users_has_Foren_Users1_idx` (`usersId` ASC),
  CONSTRAINT `fk_Users_has_Foren_Users1`
    FOREIGN KEY (`usersId`)
    REFERENCES `squid`.`Users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Users_has_Foren_Foren1`
    FOREIGN KEY (`forumsId`)
    REFERENCES `squid`.`Forums` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `squid`.`Ratings`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `squid`.`Ratings` (
  `contributionsId` INT NOT NULL,
  `usersId` INT NOT NULL,
  `rating` INT NOT NULL,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`contributionsId`, `usersId`),
  INDEX `fk_Contributions_has_Users_Users1_idx` (`usersId` ASC),
  INDEX `fk_Contributions_has_Users_Contributions1_idx` (`contributionsId` ASC),
  CONSTRAINT `fk_Contributions_has_Users_Contributions1`
    FOREIGN KEY (`contributionsId`)
    REFERENCES `squid`.`Contributions` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Contributions_has_Users_Users1`
    FOREIGN KEY (`usersId`)
    REFERENCES `squid`.`Users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `squid`.`apiTokens`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `squid`.`apiTokens` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `createdAt` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `apiToken` VARCHAR(256) NOT NULL,
  PRIMARY KEY (`id`));

USE `squid` ;

-- -----------------------------------------------------
-- Placeholder table for view `squid`.`view1`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `squid`.`view1` (`id` INT);

-- -----------------------------------------------------
-- View `squid`.`view1`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `squid`.`view1`;
USE `squid`;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `squid`.`Logins`
-- -----------------------------------------------------
START TRANSACTION;
USE `squid`;
INSERT INTO `squid`.`Logins` (`id`, `createdAt`, `updatedAt`, `passwordHash`, `isAdmin`, `isEnabled`) VALUES (1, '\'2002-01-01 00:00:01', '\'2010-01-01 00:00:01', 'johnistcool', NULL, NULL);
INSERT INTO `squid`.`Logins` (`id`, `createdAt`, `updatedAt`, `passwordHash`, `isAdmin`, `isEnabled`) VALUES (2, '\'2002-01-01 00:00:01', '\'2003-01-01 00:00:01', 'matthiasistcool', NULL, NULL);
INSERT INTO `squid`.`Logins` (`id`, `createdAt`, `updatedAt`, `passwordHash`, `isAdmin`, `isEnabled`) VALUES (3, '\'2002-01-01 00:00:01', '\'2005-01-01 00:00:01', 'dirkundrobinsindauchaberesgibtnur4user', NULL, NULL);
INSERT INTO `squid`.`Logins` (`id`, `createdAt`, `updatedAt`, `passwordHash`, `isAdmin`, `isEnabled`) VALUES (4, '\'2002-01-01 00:00:01', '\'2013-01-01 00:00:01', 'saskiaistauchcool', NULL, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `squid`.`Images`
-- -----------------------------------------------------

START TRANSACTION;
USE `squid`;
INSERT INTO `images` (`id`, `profilePicturePath`, `description`, `updatedAt`, `createdAt`) VALUES
(1, 'bowtie01.png', 'Pink - Schleife', NULL, '2021-07-11 12:26:47'),
(2, 'bowtie02.png', 'Blau - Schleife', NULL, '2021-07-11 12:26:47'),
(3, 'bowtie03.png', 'Orange - Schleife', NULL, '2021-07-11 12:26:47'),
(4, 'bowtie04.png', 'Grün - Schleife', NULL, '2021-07-11 12:26:47'),
(5, 'monocle01.png', 'Pink - Monokel', NULL, '2021-07-11 12:27:58'),
(6, 'monocle02.png', 'Blau - Monokel', NULL, '2021-07-11 12:27:58'),
(7, 'monocle03.png', 'Orange - Monokel', NULL, '2021-07-11 12:27:58'),
(8, 'monocle04.png', 'Grün - Monokel', NULL, '2021-07-11 12:27:58'),
(9, 'pure01.png', 'Pink', NULL, '2021-07-11 12:28:45'),
(10, 'pure02.png', 'Blau', NULL, '2021-07-11 12:28:45'),
(11, 'pure03.png', 'Orange', NULL, '2021-07-11 12:28:45'),
(12, 'pure04.png', 'Grün', NULL, '2021-07-11 12:28:45'),
(13, 'tie01.png', 'Pink - Krawatte', NULL, '2021-07-11 12:29:48'),
(14, 'tie02.png', 'Blau - Krawatte', NULL, '2021-07-11 12:29:48'),
(15, 'tie03.png', 'Orange - Krawatte', NULL, '2021-07-11 12:29:48'),
(16, 'tie04.png', 'Grün - Krawatte', NULL, '2021-07-11 12:29:48');
COMMIT;



-- -----------------------------------------------------
-- Data for table `squid`.`Users`
-- -----------------------------------------------------
START TRANSACTION;
USE `squid`;
INSERT INTO `squid`.`Users` (`id`, `createdAt`, `updatedAt`, `userName`, `loginsId`, `imagesId`) VALUES (1, '\'2001-01-01 00:00:01', '\'2006-01-01 00:00:01', 'Squid1', 1, null);
INSERT INTO `squid`.`Users` (`id`, `createdAt`, `updatedAt`, `userName`, `loginsId`, `imagesId`) VALUES (2, '\'2001-01-01 00:00:01', '\'2003-01-01 00:00:01', 'Squid2', 2, null);
INSERT INTO `squid`.`Users` (`id`, `createdAt`, `updatedAt`, `userName`, `loginsId`, `imagesId`) VALUES (3, '\'2001-01-01 00:00:01', '\'2019-01-01 00:00:01', 'Squid3', 3, null);
INSERT INTO `squid`.`Users` (`id`, `createdAt`, `updatedAt`, `userName`, `loginsId`, `imagesId`) VALUES (4, '\'2001-01-01 00:00:01', '\'2015-01-01 00:00:01', 'Squid4', 4, null);

COMMIT;


-- -----------------------------------------------------
-- Data for table `squid`.`Forums`
-- -----------------------------------------------------
START TRANSACTION;
USE `squid`;
INSERT INTO `squid`.`Forums` (`id`, `title`, `createdAt`, `updatedAt`, `shortDescription`) VALUES (1, 'Science Fiction', '\'2001-01-01 00:00:01', '\'2008-06-03 00:00:01', NULL);
INSERT INTO `squid`.`Forums` (`id`, `title`, `createdAt`, `updatedAt`, `shortDescription`) VALUES (2, 'Tiere & Co', '\'2001-01-01 00:00:01', '\'2015-10-10 00:00:01', NULL);
INSERT INTO `squid`.`Forums` (`id`, `title`, `createdAt`, `updatedAt`, `shortDescription`) VALUES (3, 'Studium', '\'2001-01-01 00:00:01', '\'2003-01-05 00:00:01', NULL);
INSERT INTO `squid`.`Forums` (`id`, `title`, `createdAt`, `updatedAt`, `shortDescription`) VALUES (4, 'BuGa Erfurt 20/21', '\'2010-01-01 00:00:01', '\'2021-06-10 00:00:01', NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `squid`.`Threads`
-- -----------------------------------------------------
START TRANSACTION;
USE `squid`;
INSERT INTO `squid`.`Threads` (`id`, `createdAt`, `updatedAt`, `title`, `Content`, `usersId`, `forumsId`) VALUES (1, '\'2001-09-03 10:10:59\'', '\'2005-10-04 20:10:59\'', 'Harry Potter', 'Dieser Thread enthält alles rund um Hogwarts! ', 1, 1);
INSERT INTO `squid`.`Threads` (`id`, `createdAt`, `updatedAt`, `title`, `Content`, `usersId`, `forumsId`) VALUES (2, '\'2001-09-03 10:10:59\'', '\'2005-10-04 20:10:59\'', 'Katzentatzen', 'Katzentazen sind süß!', 2, 2);
INSERT INTO `squid`.`Threads` (`id`, `createdAt`, `updatedAt`, `title`, `Content`, `usersId`, `forumsId`) VALUES (3, '\'2001-09-03 10:10:59\'', '\'2005-10-04 20:10:59\'', 'Studizeugs', 'Hier geht\'s ums Studieren! Teilt euer Wissen', 3, 3);
INSERT INTO `squid`.`Threads` (`id`, `createdAt`, `updatedAt`, `title`, `Content`, `usersId`, `forumsId`) VALUES (4, '\'2001-09-03 10:10:59\'', '\'2005-10-04 20:10:59\'', 'Blumen', 'Grüne Daumen sind willkommen!', 4, 4);
INSERT INTO `squid`.`Threads` (`id`, `createdAt`, `updatedAt`, `title`, `Content`, `usersId`, `forumsId`) VALUES (5, '\'2001-09-03 10:10:59\'', '\'2005-10-04 20:10:59\'', 'Prüfungsabgabe', 'Grüne DauPrüfungsabgabe verkackt ', 1, 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `squid`.`Contributions`
-- -----------------------------------------------------
START TRANSACTION;
USE `squid`;
INSERT INTO `squid`.`Contributions` (`id`, `createdAt`, `updatedAt`, `content`, `threadsId`, `usersId`) VALUES (1, '\'2002-01-01 00:00:01', '\'2005-01-01 00:00:01', 'Hermine ist doof :(', 1, 1);
INSERT INTO `squid`.`Contributions` (`id`, `createdAt`, `updatedAt`, `content`, `threadsId`, `usersId`) VALUES (2, '\'2002-01-01 00:00:01', '\'2006-01-01 00:00:01', 'katzen sind nicht besser als Hunde', 2, 3);
INSERT INTO `squid`.`Contributions` (`id`, `createdAt`, `updatedAt`, `content`, `threadsId`, `usersId`) VALUES (3, '\'2002-01-01 00:00:01', '\'2010-01-01 00:00:01', 'wann müssen wir noch das Webaufbau-Projekt abgeben? gar kein Bock', 3, 3);
INSERT INTO `squid`.`Contributions` (`id`, `createdAt`, `updatedAt`, `content`, `threadsId`, `usersId`) VALUES (4, '\'2002-01-01 00:00:01', '\'2007-01-01 00:00:01', 'Pusteblumen in meiner Nase. Schnee im Sommer.', 4, 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `squid`.`SubscribedThreads`
-- -----------------------------------------------------
START TRANSACTION;
USE `squid`;
INSERT INTO `squid`.`SubscribedThreads` (`threadsId`, `usersId`, `timeStamp`, `updatedAt`, `createdAt`) VALUES (1, 1, '\'2002-01-01 00:00:01', NULL, DEFAULT);
INSERT INTO `squid`.`SubscribedThreads` (`threadsId`, `usersId`, `timeStamp`, `updatedAt`, `createdAt`) VALUES (2, 1, '\'2002-01-01 00:00:01', NULL, DEFAULT);
INSERT INTO `squid`.`SubscribedThreads` (`threadsId`, `usersId`, `timeStamp`, `updatedAt`, `createdAt`) VALUES (3, 1, '\'2002-01-01 00:00:01', NULL, DEFAULT);
INSERT INTO `squid`.`SubscribedThreads` (`threadsId`, `usersId`, `timeStamp`, `updatedAt`, `createdAt`) VALUES (4, 4, '\'2002-01-01 00:00:01', NULL, DEFAULT);

COMMIT;


-- -----------------------------------------------------
-- Data for table `squid`.`SubscribedForums`
-- -----------------------------------------------------
START TRANSACTION;
USE `squid`;
INSERT INTO `squid`.`SubscribedForums` (`usersId`, `forumsId`, `timeStamp`, `updatedAt`, `createdAt`) VALUES (1, 1, '\'2002-01-01 00:00:01', NULL, DEFAULT);
INSERT INTO `squid`.`SubscribedForums` (`usersId`, `forumsId`, `timeStamp`, `updatedAt`, `createdAt`) VALUES (2, 1, '\'2002-01-01 00:00:01', NULL, DEFAULT);
INSERT INTO `squid`.`SubscribedForums` (`usersId`, `forumsId`, `timeStamp`, `updatedAt`, `createdAt`) VALUES (3, 3, '\'2002-01-01 00:00:01', NULL, DEFAULT);
INSERT INTO `squid`.`SubscribedForums` (`usersId`, `forumsId`, `timeStamp`, `updatedAt`, `createdAt`) VALUES (4, 4, '\'2002-01-01 00:00:01', NULL, DEFAULT);

COMMIT;


-- -----------------------------------------------------
-- Data for table `squid`.`Ratings`
-- -----------------------------------------------------
START TRANSACTION;
USE `squid`;
INSERT INTO `squid`.`Ratings` (`contributionsId`, `usersId`, `rating`, `createdAt`, `updatedAt`) VALUES (1, 1, +1, DEFAULT, NULL);
INSERT INTO `squid`.`Ratings` (`contributionsId`, `usersId`, `rating`, `createdAt`, `updatedAt`) VALUES (1, 2, -1, DEFAULT, NULL);
INSERT INTO `squid`.`Ratings` (`contributionsId`, `usersId`, `rating`, `createdAt`, `updatedAt`) VALUES (1, 3, +1, DEFAULT, NULL);
INSERT INTO `squid`.`Ratings` (`contributionsId`, `usersId`, `rating`, `createdAt`, `updatedAt`) VALUES (2, 3, +1, DEFAULT, NULL);

COMMIT;

